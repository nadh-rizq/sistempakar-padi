import{r as c,W as h,j as r,F as O,a as e,b as T,c as D,y as S}from"./app-ba0260c4.js";import p from"./Modal-2f824324.js";import{F as x,S as o}from"./FlashMixin-8e785d16.js";import j from"./Textarea-dc41ae47.js";const A=({dataGejala:d,flash:t})=>{c.useEffect(()=>{t!=null&&t.success&&x.fire({icon:"success",title:t.success}),t!=null&&t.error&&x.fire({icon:"error",title:t.error})},[t]);const[b,m]=c.useState(!1),[g,u]=c.useState(!1),l=h({gejala:""}),n=h({kodeGejala:"",gejala:""}),[i,f]=c.useState({}),C=a=>{l.setData(a.target.name,a.target.value)},N=a=>{n.setData({kodeGejala:a.kodeGejala,gejala:a.gejala}),u(!0)},k=()=>d.some(s=>s.gejala.toLowerCase()===l.data.gejala.toLowerCase())?(f({...i,gejala:"*gejala sudah ada!"}),!1):!0,w=a=>{a.preventDefault(),k()&&l.post("/list-gejala",{onSuccess:()=>{m(!1),l.reset()},onError:()=>{o.fire({icon:"error",title:"Gagal!",text:"Terjadi kesalahan, coba lagi.",confirmButtonColor:"#F47C7C",confirmButtonText:"OK"})}})},G=a=>{a.preventDefault(),n.put(`/list-gejala/${n.data.kodeGejala}`,{onSuccess:()=>{u(!1),n.reset()},onError:()=>{o.fire({icon:"error",title:"Gagal!",text:"Terjadi kesalahan, coba lagi.",confirmButtonColor:"#F47C7C",confirmButtonText:"OK"})}})},v=a=>{o.fire({title:"Yakin ingin menghapus?",text:"Data yang dihapus tidak bisa dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#F47C7C",cancelButtonColor:"#43766C",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((s,y)=>{S.delete(`/list-gejala/${a}`,{onSuccess:()=>{s()},onError:()=>{y(),o.fire("Gagal!","Terjadi kesalahan saat menghapus data.","error")}})}),allowOutsideClick:()=>!o.isLoading()})};return r(O,{children:[e("div",{className:"w-full py-2",children:r("div",{className:"min-h-[50px] bg-gray-50 rounded-md text-green flex justify-between items-center mr-2",children:[e("div",{className:"card-title mx-5",children:"Data Gejala Organisme Pengganggu Tumbuhan (OPT)"}),e("button",{className:"mx-5 btn btn-primary btn-sm",onClick:()=>m(!0),children:"+ Tambah Data"})]})}),e(p,{isOpen:b,title:"Masukkan Gejala Baru!",onSend:w,onClose:()=>m(!1),processing:l.processing,w:"max-w-5xl",children:r("div",{className:"fieldset",children:[e("legend",{className:"fieldset-legend text-xs text-primary mb-[5px]",children:"Gejala"}),e(j,{name:"gejala",value:l.data.gejala,onChange:C,placeholder:"Gejala Organisme Pengganggu Tumbuhan..."}),i.gejala&&e("p",{className:"text-error text-xs mt-1",children:i.gejala})]})}),g&&e(p,{isOpen:g,title:"Ubah data Gejala!",onSend:G,onClose:()=>u(!1),processing:n.processing,w:"max-w-5xl",children:r("div",{className:"fieldset",children:[e("legend",{className:"fieldset-legend text-xs text-primary mb-[5px]",children:"Gejala"}),e(j,{name:"gejala",value:n.data.gejala,onChange:a=>n.setData("gejala",a.target.value),placeholder:"Gejala Organisme Pengganggu Tumbuhan..."}),i.gejala&&e("p",{className:"text-error text-xs mt-1",children:i.gejala})]})}),e("div",{className:"w-full",children:e("div",{className:"h-[calc(100vh-165px)] overflow-x-auto rounded-lg",children:r("table",{className:"table table-pin-rows bg-gray-50",children:[e("thead",{className:"border-b-2 text-sm text-primary font-bold",children:r("tr",{children:[e("th",{children:"#"}),e("th",{children:"KODE GEJALA"}),e("th",{children:"GEJALA OPT PADI"}),e("th",{className:"text-center",children:"AKSI"})]})}),e("tbody",{className:"text-gray-400",children:d?d.map((a,s)=>r("tr",{children:[e("td",{children:s+1}),e("td",{children:a.kodeGejala}),e("td",{children:a.gejala}),e("td",{className:"text-center",children:r("div",{className:"flex items-center justify-center gap-1",children:[e("button",{className:"btn btn-xs text-primary btn-circle",onClick:()=>N(a),children:e(T,{})}),e("button",{className:"btn btn-xs text-primary btn-circle",onClick:()=>v(a.kodeGejala),children:e(D,{})})]})})]},s)):e("tr",{className:"text-center",children:e("td",{colSpan:4,children:e("i",{children:"~ belum ada data ~"})})})})]})})})]})};export{A as default};
