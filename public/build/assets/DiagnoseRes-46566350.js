import{r as c,W as A,j as s,a,Y as I,A as D,L as G,F as V,R as H,g as P,y as m}from"./app-996c5dc9.js";import S from"./ResultDiagnose-85af87a8.js";import N from"./ModalAuth-ca9fecf1.js";import"./InputError-9106afde.js";function K({hasil:n,optPadi:g,penanggulangan:_,userSelectedGejala:p,user:E}){const[w,M]=c.useState(!0),t=A({email:"",password:""}),o=A({name:"",email:"",password:"",password_confirmation:""}),[h,u]=c.useState({}),j=()=>{const e={};return t.data.email.trim()?/\S+@\S+\.\S+/.test(t.data.email)||(e.email="format email tidak valid."):e.email="email wajib diisi.",u(e),Object.keys(e).length===0},k=()=>{const e={};return o.data.name.trim()||(e.name="username wajib diisi."),o.data.email.trim()?/\S+@\S+\.\S+/.test(o.data.email)||(e.email="format email tidak valid."):e.email="email wajib diisi.",o.data.password?o.data.password.length<8&&(e.password="password minimal 8 karakter."):e.password="password wajib diisi.",o.data.password!==o.data.password_confirmation&&(e.password_confirmation="Konfirmasi password tidak cocok."),u(e),Object.keys(e).length===0},f=e=>{t.setData(e.target.name,e.target.value)},d=e=>{o.setData(e.target.name,e.target.value)},[v,x]=c.useState(!1),F=()=>{E?(x(!0),m.post("/simpan-diagnosa",i,{onFinish:()=>x(!1)})):document.getElementById("modal_login").showModal()},r=n==null?void 0:n[0],y=g.find(e=>e.id===(r==null?void 0:r.opt)),b=Array.isArray(p)?p.filter(e=>e&&e.gejala&&e.kodeGejala).map(e=>`${e.gejala} (${e.kodeGejala})`):[],i=r&&y&&b.length>0?{gejala:b,opt:y.opt,score:r.score}:null,R=e=>{e.preventDefault(),j()&&t.post(route("login"),{onSuccess:()=>{i&&m.post("/simpan-diagnosa",i),document.getElementById("modal_login").close(),t.reset()},onError:l=>{console.error("Register error:",l)}})},Z=e=>{e.preventDefault(),k()&&o.post(route("register"),{onSuccess:()=>{i&&m.post("/simpan-diagnosa",i),o.reset(),document.getElementById("modal_register").close()},onError:l=>{console.error("Register error:",l)}})},C=()=>{i&&sessionStorage.setItem("guestHistori",JSON.stringify(i)),window.location.href=`${window.location.origin}/auth/redirect`};return c.useEffect(()=>{const e=setTimeout(()=>{M(!1)},6e3);return()=>clearTimeout(e)},[]),s("div",{className:"min-h-screen bg-slate-50",children:[a(I,{title:"Sistem Pakar"}),a(D,{children:w&&a(G,{text:"Mendiagnosa..."})}),!w&&s(V,{children:[a("div",{className:"navbar fixed top-0 left-0 z-20 bg-green text-white",children:a("div",{className:"navbar-start",children:a("div",{className:"px-4",children:a("a",{href:"/",children:s("svg",{width:"29",height:"34",viewBox:"0 0 29 34",fill:"none",xmln:!0,s:"http://www.w3.org/2000/svg",children:[a("path",{d:"M14.1367 32.5081C6.75177 32.8728 0.469526 27.1818 0.104871 19.7969L-0.000243956 17.6681C7.38464 17.3035 13.6669 22.9945 14.0315 30.3794L14.1367 32.5081Z",fill:"#F2F4E7"}),a("path",{d:"M19.2202 15.5003C11.8353 15.8649 5.55302 10.1739 5.18837 2.78903L5.08325 0.660264C12.4681 0.295609 18.7504 5.98664 19.115 13.3715L19.2202 15.5003Z",fill:"#F2F4E7"}),a("path",{d:"M15.3804 32.4468C22.7653 32.0821 28.4563 25.7999 28.0917 18.415L27.9866 16.2862C20.6017 16.6509 14.9107 22.9331 15.2753 30.318L15.3804 32.4468Z",fill:"#F2F4E7"})]})})})})}),a(N,{id:"modal_login",title:"Login to Your Account!",subtitle:"You must be logged to perform this action.",google:"Sign in with Google",footer:"Don't have an account?",subfooter:"Sign Up",linkfooter:e=>{e.preventDefault(),document.getElementById("modal_login").close(),setTimeout(()=>{document.getElementById("modal_register").showModal()},200)},onSubmit:R,googleLogin:C,processing:t.processing,errors:h,input:[{id:"email_login",types:"email",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:[a("path",{d:"M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"}),a("path",{d:"M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"})]}),names:"email",placeholder:"Email",value:t.email,onChange:f},{id:"password_login",types:"password",icon:a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:a("path",{fillRule:"evenodd",d:"M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z",clipRule:"evenodd"})}),names:"password",placeholder:"Password",value:t.password,onChange:f}]}),a(N,{id:"modal_register",title:"Create a New Account!",subtitle:"Create an account to continue",google:"Sign in with Google",footer:"Already registered?",subfooter:"Log In",linkfooter:e=>{e.preventDefault(),document.getElementById("modal_register").close(),setTimeout(()=>{document.getElementById("modal_login").showModal()},200)},onSubmit:Z,googleLogin:C,processing:o.processing,errors:h,input:[{id:"name_regis",types:"text",icon:a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:a("path",{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM12.735 14c.618 0 1.093-.561.872-1.139a6.002 6.002 0 0 0-11.215 0c-.22.578.254 1.139.872 1.139h9.47Z"})}),names:"name",placeholder:"Name",value:o.name,onChange:d},{id:"email_regis",types:"email",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:[a("path",{d:"M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z"}),a("path",{d:"M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z"})]}),names:"email",placeholder:"Email",value:o.email,onChange:d},{id:"password_regis",types:"password",icon:a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:a("path",{fillRule:"evenodd",d:"M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z",clipRule:"evenodd"})}),names:"password",placeholder:"Password",value:o.password,onChange:d},{id:"confirm_password_regis",types:"password",icon:a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"h-4 w-4 opacity-70",children:a("path",{fillRule:"evenodd",d:"M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z",clipRule:"evenodd"})}),names:"password_confirmation",placeholder:"Confirm Password",value:o.password_confirmation,onChange:d}]}),a("div",{id:"result",className:"w-full min-h-screen px-5 lg:px-[72px] bg-gradient-to-b from-[#43766C] to-[#407067] overflow-y-auto mt-[64px]",children:s("div",{className:"flex flex-col justify-center items-center h-full text-white p-5 mt-[64px]",children:[n==null?void 0:n.slice(0,1).map((e,l)=>{const L=g.find(B=>B.id===e.opt);return a(H.Fragment,{children:L?a(S,{penanggulangan:_,opt:L,score:parseFloat(e.score).toFixed(6)}):a(S,{})},l)}),a("button",{className:"btn btn-secondary mt-5 btn-lg font-bold",onClick:F,disabled:v,type:"button",children:v?s("span",{className:"flex items-center gap-2",children:[a("span",{className:"loading loading-spinner"}),a("i",{children:"Loading"})]}):s("span",{className:"flex items-center gap-2",children:["SIMPAN HASIL DIAGNOSA ",a(P,{})]})})]})})]})]})}export{K as default};
