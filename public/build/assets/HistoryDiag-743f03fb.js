import{r as p,j as n,F as g,a as e,R as x,c as b,y}from"./app-996c5dc9.js";import{F as h,S as s}from"./FlashMixin-8e785d16.js";const S=({riwayatDiagnosa:l,flash:r})=>{p.useEffect(()=>{r!=null&&r.success&&h.fire({icon:"success",title:r.success}),r!=null&&r.error&&h.fire({icon:"error",title:r.error})},[r]);const u=t=>{s.fire({title:"Yakin ingin menghapus?",text:"Data yang dihapus tidak bisa dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#F47C7C",cancelButtonColor:"#43766C",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((i,c)=>{y.delete(`/list-riwayat/${t}`,{onSuccess:()=>{i()},onError:()=>{c(),s.fire("Gagal!","Terjadi kesalahan saat menghapus data.","error")}})}),allowOutsideClick:()=>!s.isLoading()})};return n(g,{children:[e("div",{className:"py-2 w-full",children:e("div",{className:" min-h-[50px] bg-gray-50 rounded-md text-green flex justify-between items-center mr-2",children:e("div",{className:"card-title mx-5",children:"Riwayat Diagnosa User"})})}),e("div",{className:"w-full py-2",children:e("div",{className:"h-[calc(100vh-165px)] overflow-x-auto rounded-lg  ",children:n("table",{className:"table bg-gray-50",children:[n("thead",{className:"border-b-2 text-sm bg-gray-50 text-primary text-center font-bold sticky top-0",children:[n("tr",{children:[e("th",{rowSpan:"2",children:"#"}),e("th",{rowSpan:"2",children:"TANGGAL"}),e("th",{rowSpan:"2",children:"GEJALA"}),e("th",{colSpan:"2",children:" HASIL DIAGNOSA"}),e("th",{className:"text-center",rowSpan:"2",children:"AKSI"})]}),n("tr",{children:[e("th",{children:"OPT"}),e("th",{children:"(%)"})]})]}),e("tbody",{className:"text-gray-400",children:l.length>0?Object.keys(l.reduce((t,i)=>(t[i.user.email]||(t[i.user.email]=[]),t[i.user.email].push(i),t),{})).map((t,i)=>{var d,o;const c=l.filter(a=>a.user.email===t);return n(x.Fragment,{children:[e("tr",{children:n("td",{colSpan:"7",className:"font-semibold",children:[(o=(d=c[0])==null?void 0:d.user)==null?void 0:o.name," ","(",t,")"]})}),c.map((a,m)=>n("tr",{children:[e("td",{children:m+1}),e("td",{children:new Date(a.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"})}),e("td",{children:JSON.parse(a.gejala).join(", ")}),e("td",{children:a.opt}),n("td",{children:[(a.score*100).toFixed(2),"%"]}),e("td",{children:e("div",{className:"flex items-center justify-center gap-1",children:e("button",{className:"btn btn-xs text-primary btn-circle",onClick:()=>u(a.id),children:e(b,{})})})})]},m))]},i)}):e("tr",{className:"text-center",children:e("td",{colSpan:6,children:e("i",{children:"~ belum ada data ~"})})})})]})})})]})};export{S as default};
